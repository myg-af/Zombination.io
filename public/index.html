<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Zombination.io</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <style>
    html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #222; color: white; font-family: Arial, sans-serif; touch-action: none; }
    #gameCanvas { display: block; background: #222; position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; touch-action: none; }
    #hudStats { position: fixed; left: 10px; bottom: 10px; background: rgba(0,0,0,0.7); border-radius: 7px; padding: 10px 20px 10px 15px; font-size: 18px; user-select: none; min-width: 210px; z-index: 10;}
    #hudAlive { font-weight: bold; color: #fd7; }
    #deathScreen { display: none; position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; background: rgba(30,0,0,0.8); z-index: 20; justify-content: center; align-items: center; flex-direction: column; }
    #deathScreenInner { background: #181818; border-radius: 20px; padding: 35px 45px; color: #fff; box-shadow: 0 6px 30px #000c; text-align: center; min-width: 320px; }
    #deathScreen h2 { margin: 0 0 15px 0; color: #fc2c3c; }
    #deathStats { margin-bottom: 15px; font-size: 20px; }
    #btnReplay { background: #222; color: #fff; padding: 10px 32px; border: none; border-radius: 10px; font-size: 20px; cursor: pointer; transition: background 0.16s; }
    #btnReplay:hover { background: #393; color: #fff; }
    /* --- LOBBY --- */
    #lobbyScreen { display: flex; flex-direction: column; align-items: center; justify-content: center; position: fixed; left:0;top:0;width:100vw;height:100vh;z-index:30; background: #181c; }
    #lobbyBox { background: #19191e; border-radius: 20px; padding: 36px 42px; box-shadow: 0 6px 30px #000c; min-width: 350px; min-height: 190px; text-align: center; }
    #lobbyBox input[type=text] { font-size: 20px; padding: 7px 12px; border-radius: 7px; border: 1px solid #444; outline: none; margin-bottom: 10px; width: 175px; }
    #lobbyJoin { padding: 7px 32px; border-radius: 8px; border:none; font-size: 20px; background:#49c749; color: #fff; cursor: pointer; margin-top: 7px; }
    #lobbyJoin[disabled] { opacity: 0.6; cursor: not-allowed; }
    #lobbyPlayers { margin: 18px 0 12px 0; color: #9fd; }
    #lobbyTimer { font-size: 17px; margin-bottom: 9px; }
    #lobbyStatus { margin: 4px 0 0 0; color: #ccc; font-size: 14px; }

    /* --- LANG SELECT --- */
    #langSelectRow {
      margin-top: 18px;
      display: flex;
      justify-content: center;
      gap: 13px;
      user-select: none;
    }
    .langFlag {
      width: 38px;
      height: 26px;
      border-radius: 6px;
      border: 2px solid transparent;
      cursor: pointer;
      transition: border 0.14s, transform 0.12s;
      background: #fff2;
      object-fit: cover;
      box-shadow: 0 2px 10px #0003;
    }
    .langFlag.selected {
      border: 2.5px solid #33fc69;
      transform: scale(1.07);
      box-shadow: 0 2px 16px #33fc6930;
    }

    /* --- WAVE MESSAGE --- */
    #waveMessage {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #f2f263;
      font-size: 48px;
      font-weight: bold;
      text-shadow: 2px 2px 6px #000;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.4s ease-in-out;
      z-index: 20;
      user-select: none;
    }
    /* ---- MOBILE CONTROLS ---- */
    #mobileControls { display: none; position: fixed; left:0; top:0; width:100vw; height:100vh; pointer-events: none; z-index: 15;}
    .joystickZone.move {
      position: absolute;
      top: 48px;
      right: 32px;
      width: 72px;
      height: 72px;
      pointer-events: auto;
      z-index: 100;
      touch-action: none;
      opacity: 0.62;
    }
    #btnShoot {
      position: absolute;
      top: 55px;
      left: 34px;
      width: 60px; height: 60px;
      background: linear-gradient(145deg,#ff5555 75%,#ffadad 100%);
      border-radius: 50%;
      border: 2px solid #fff8;
      box-shadow: 0 2px 9px #d9030345;
      color: #fff;
      font-size: 23px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: auto;
      opacity: 0.66;
      user-select: none;
      z-index: 101;
      touch-action: none;
      transition: background 0.12s;
    }
    #btnShoot:active {
      background: linear-gradient(145deg,#c0392b 70%,#ffadad 100%);
    }
    .joystickBase {
      position: absolute;
      left: 0; top: 0;
      width: 72px; height: 72px;
      background: rgba(80,90,80,0.11);
      border-radius: 36px;
      border: 2px solid #4e8e51;
      box-shadow: 0 0 10px #0006;
      pointer-events: none;
    }
    .joystickStick {
      position: absolute;
      width: 32px; height: 32px;
      left: 20px; top: 20px;
      background: rgba(93,206,77,0.68);
      border-radius: 50%;
      border: 2px solid #38b154;
      box-shadow: 0 2px 8px #0005;
      pointer-events: none;
      transition: background 0.1s;
    }
    @media (max-width: 900px) {
      .joystickZone.move { width: 54px; height: 54px; top: 24px; right: 11vw; }
      #btnShoot { width: 38px; height: 38px; top: 20px; left: 8vw; }
      .joystickBase { width: 54px; height: 54px; border-radius: 27px;}
      .joystickStick { width: 20px; height: 20px; left: 15px; top: 15px;}
    }
    @media (max-width: 600px) {
      .joystickZone.move { right: 4vw; }
      #btnShoot { left: 3vw; }
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <div id="hudStats">
    <div id="hudAlive"></div>
    <div id="hudZombies"></div>
    <div id="hudKills"></div>
    <div id="hudRound"></div>
    <div id="hudHP"></div>
  </div>
  <div id="deathScreen">
    <div id="deathScreenInner">
      <h2 id="deathTitle"></h2>
      <div id="deathStats"></div>
      <button id="btnReplay"></button>
    </div>
  </div>
  <div id="lobbyScreen">
    <div id="lobbyBox">
      <div id="lobbyTitle" style="font-size: 28px; margin-bottom: 18px;"><b>Zombination.io</b></div>
      <div id="lobbyPlayers"></div>
      <div id="lobbyTimer"></div>
      <div id="lobbyStatus"></div>
      <input type="text" id="pseudoInput" maxlength="15" placeholder="" />
      <br>
      <button id="lobbyJoin"></button>
      <div id="langSelectRow"></div>
    </div>
  </div>
  <div id="waveMessage"></div>
  <!-- Mobile Controls -->
  <div id="mobileControls">
    <div class="joystickZone move" id="joystickZone">
      <div class="joystickBase"></div>
      <div class="joystickStick" id="joystickStick"></div>
    </div>
    <button id="btnShoot" style="display:none;">
      <svg width="34" height="34" viewBox="0 0 34 34"><circle cx="17" cy="17" r="13" fill="#fff3" /><circle cx="17" cy="17" r="9" fill="#ff3c3c"/><path d="M11 18 l6 -6 l6 6" stroke="#fff" stroke-width="2" fill="none"/></svg>
    </button>
  </div>
  <script src="/translations.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    // ----- Variables de traduction, lobby, etc. -----
    // ... (toute la logique de base restée inchangée, voir messages précédents)
    // Seule la valeur suivante change :
    const PLAYER_SPEED_PER_SEC = 700;
    // ... (tout le reste du JS d'origine, inchangé)
    // (voir ta version actuelle pour l’intégralité du JS, rien à retirer ni à rajouter)
  </script>
</body>
</html>
